<!DOCTYPE html>

<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Un pequeño juego</title>

<style>
body{
    margin:0;
    background:black;
    font-family:Arial;
    color:white;
    text-align:center;
    overflow:hidden;
}

h3{
    margin:10px 0 5px 0;
    font-size:18px;
}

#juego{
    background:#050510;
    border:2px solid #444;
    display:block;
    margin:auto;
}

/* MENSAJE */
#mensaje{
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    font-size:20px;
    display:none;
    background:rgba(0,0,0,0.85);
    padding:18px;
    border-radius:12px;
    width:80%;
}

/* CONTROLES */
#controles{
    position:fixed;
    bottom:10px;
    width:100%;
    display:flex;
    justify-content:center;
    gap:12px;
}

.boton{
    width:60px;
    height:60px;
    background:#222;
    color:white;
    font-size:24px;
    border-radius:14px;
    display:flex;
    align-items:center;
    justify-content:center;
    user-select:none;
    touch-action:none;
}

.boton:active{
    background:#555;
}
</style>

</head>

<body>

<h3>Llega hasta el corazón ❤️</h3>
<canvas id="juego"></canvas>

<div id="mensaje">
❤️<br><br>
Si encontraste esto…<br>
era lo que quería decirte desde hace tiempo:<br><br>
Me gustas mucho.
</div>

<div id="controles">
<div class="boton" id="left">←</div>
<div class="boton" id="up">↑</div>
<div class="boton" id="down">↓</div>
<div class="boton" id="right">→</div>
</div>

<script>
const canvas=document.getElementById("juego");
const ctx=canvas.getContext("2d");

/* TAMAÑO ADAPTABLE AL CELULAR */
function resize(){
    canvas.width=window.innerWidth*0.95;
    canvas.height=window.innerHeight*0.55;
}
resize();
window.addEventListener("resize",resize);

let jugador={x:20,y:100,size:20,speed:4};
let corazon={x:300,y:150,size:20};
let keys={};

/* TECLADO PC */
document.addEventListener("keydown",e=>keys[e.key]=true);
document.addEventListener("keyup",e=>keys[e.key]=false);

/* CONTROLES TÁCTILES */
function touch(id,key){
    const btn=document.getElementById(id);
    btn.addEventListener("touchstart",e=>{
        e.preventDefault();
        keys[key]=true;
    });
    btn.addEventListener("touchend",()=>keys[key]=false);
}

touch("up","ArrowUp");
touch("down","ArrowDown");
touch("left","ArrowLeft");
touch("right","ArrowRight");

/* MOVIMIENTO */
function mover(){
    if(keys["ArrowUp"]) jugador.y-=jugador.speed;
    if(keys["ArrowDown"]) jugador.y+=jugador.speed;
    if(keys["ArrowLeft"]) jugador.x-=jugador.speed;
    if(keys["ArrowRight"]) jugador.x+=jugador.speed;

    if(jugador.x<0) jugador.x=0;
    if(jugador.y<0) jugador.y=0;
    if(jugador.x>canvas.width-jugador.size) jugador.x=canvas.width-jugador.size;
    if(jugador.y>canvas.height-jugador.size) jugador.y=canvas.height-jugador.size;
}

/* DIBUJAR */
function dibujarJugador(){
    ctx.fillStyle="cyan";
    ctx.fillRect(jugador.x,jugador.y,jugador.size,jugador.size);
}

function dibujarCorazon(){
    corazon.x=canvas.width-40;
    corazon.y=canvas.height/2;

    ctx.fillStyle="red";
    ctx.beginPath();
    ctx.arc(corazon.x,corazon.y,10,0,Math.PI*2);
    ctx.fill();
}

/* COLISIÓN */
function colision(){
return(
jugador.x<corazon.x+10 &&
jugador.x+jugador.size>corazon.x-10 &&
jugador.y<corazon.y+10 &&
jugador.y+jugador.size>corazon.y-10
);
}

/* LOOP */
function juego(){
ctx.clearRect(0,0,canvas.width,canvas.height);
mover();
dibujarJugador();
dibujarCorazon();

if(colision()){
document.getElementById("mensaje").style.display="block";
}

requestAnimationFrame(juego);
}
juego();
</script>

</body>
</html>
